#!/usr/bin/env zsh
#################################
# A somewhat fancy i3lock wrapper
#################################
set -e

screenshot=/tmp/screenshot.png
amount=${1:-0.1}
coeff1=$((100*$amount))
coeff2=$((100/$amount))

# remove any residual files generated by this script
rm -f $screenshot

# take a screenshot and then pixelize using coeff1 and coeff2
scrot $screenshot
convert -scale ${coeff1}% -scale ${coeff2}% $screenshot $screenshot

# fork i3lock
i3lock -e -i $screenshot

# Update keyboard settings
config-xmodmap
