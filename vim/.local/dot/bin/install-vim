#!/usr/bin/env zsh
##################################
# Install vim + Vundle + plugins
##################################

autoload dot_printf_install
autoload dot_printf_run
autoload dot_printf_clean

VIM_GIT=https://github.com/vim/vim.git
VIM_SRC=~/Projects/vim
VIM_OPTS=(--prefix=$DOT_PATH --enable-pythoninterp=yes --enable-python3interp=yes --enable-rubyinterp=yes)

VUNDLE_GIT=https://github.com/VundleVim/Vundle.vim.git
VUNDLE_SRC=~/.vim/bundle/Vundle.vim

dot_printf_install vim

if [ ! -d $VIM_SRC ]; then
    git clone $VIM_GIT $VIM_SRC
else
    git -C $VIM_SRC pull
fi

cd $VIM_SRC && make distclean && ./configure "${VIM_OPTS[@]}" && make install

dot_printf_install Vundle

if [ ! -d $VUNDLE_SRC ]; then
    git clone $VUNDLE_GIT $VUNDLE_SRC
else
    git -C $VUNDLE_SRC pull 
fi

dot_printf_install "Vundle plugins"
vim +PluginInstall +qall
