#!/usr/bin/env zsh
##################################
# Install git locally on $DOT_PATH
##################################

. $ZSH_HOME/lib/printf

#
# Essential variables
#
GIT_VERSION=2.4.0
GIT_BASENAME=git-$GIT_VERSION
GIT_TARBALL=$GIT_BASENAME.tar.xz
GIT_URL=https://www.kernel.org/pub/software/scm/git/$GIT_TARBALL

cd /tmp

#
# Get the actual git source tarball
#
printf_run "Getting git"
wget $GIT_URL -O $GIT_TARBALL && tar xf $GIT_TARBALL
rm -f $GIT_TARBALL

#
# Compile it
#
printf_install git
cd $GIT_BASENAME && ./configure --prefix=$DOT_PATH && make install

# Remove everything
cd /tmp && rm -rf $GIT_BASENAME
